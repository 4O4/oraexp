start_rule : create_object;

create_object : create_package ;

create_package 
   : 'CREATE' opt_or_replace package_spec_or_body
   ;

opt_or_replace 
   :  'OR' 'REPLACE'
   |
   ;
   
package_spec_or_body
   :  package_spec
   ;
   
package_spec
   :  'PACKAGE' object_name is_or_as package_obj_specs 'END' opt_object_name PLS_SEMI
   

is_or_as
   :  'IS'
   |  'AS'
   ;
 
package_obj_specs
   :  package_obj_spec package_obj_specs
   |
   ;
   
package_obj_spec
	:	variable_declaration 
	;
	
variable_declaration
	:	identifier opt_constant
		type_spec opt_not_null
		opt_assigment_or_default_plsql_expression PL_SEMI
	;	
	
type_spec
	:	multi_part_name '%TYPE'
	|	multi_part_name '%ROWTYPE'
	|	multi_part_name opt_length_spec
	;
	
opt_length_spec
   :  length_spec
   |
   ;

length_spec
   :  PLS_LPAREN PLS_NUMBER PLS_RPAREN;
   ;
	
opt_constant
   :  'CONSTANT'
   |
   ;
   
opt_not_null
   :  'NOT' 'NULL'
   |
   ;
   
assigment_or_default
   :  PLS_ASSIGN
   |  'DEFAULT'
   ;
   
opt_assigment_or_default_plsql_expression
   :  assigment_or_default plsql_expression
   |
   ;
   
plsql_expression
   :  
   
multi_part_name
   :  identifier tail_identifiers
   ;
   
tail_identifier
   :  PLS_DOT identifier
   ;
   
tail_identifiers
   :  tail_identifier tail_identifiers
   |
   ;
   
opt_object_name
   :  object_name
   |
   ;
               
object_name
	:	identifier PLS_DOT identifier 
	|  identifier
	;
   
identifier
   :	PLS_ID
   |	PLS_DOUBLEQUOTED_STRING
   ;
