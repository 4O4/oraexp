start_rule :	create_object;

create_object
	:	'CREATE' opt_or_replace
	   obj_type_and_name_and_body
	;
	
opt_or_replace
   :  'OR' 'REPLACE'
   |  
   ;
    
obj_type_and_name_and_body 
   :  'PACKAGE' object_name package_spec_or_body
   |  'PACKAGE' 'BODY' object_name package_spec_or_body
   |  'PROCEDURE' object_name proc_spec_or_body
   |  'FUNCTION' object_name func_spec_or_body
   |  'TRIGGER' object_name trigger_body
   |  opt_force 'VIEW' object_name view_body
   ;
   
package_spec_or_body
   :  any_tokens is_or_as declarations 'END' opt_identifier PLS_SEMI
   |  any_tokens is_or_as 'END' opt_identifier PLS_SEMI
   ;
   
proc_spec_or_body
   :  any_tokens is_or_as plsql_subprogram_body
   |  any_tokens PLS_SEMI
   ;
   
func_spec_or_body
   :  any_tokens 'RETURN' any_tokens is_or_as plsql_subprogram_body
   |  any_tokens 'RETURN' any_tokens PLS_SEMI
   ;
   
trigger_body
   :  any_tokens plsql_block
   ;
   
view_body 
   :  as any_tokens
   ;
      
plsql_subprogram_body
   :  declarations 'BEGIN' statements 'END' opt_identifier PLS_SEMI
   ;
     
plsql_block
   :  'DECLARE' declarations 'BEGIN' statements 'END' opt_identifier PLS_SEMI
   |  'BEGIN' statements 'END' opt_identifier PLS_SEMI
   ;
   
declarations
   :  statements opt_obj_type_and_name_and_bodies
   ;
   
statements
   :  statements statement
   |  
   ;
   
statement
   :  statement_start any_tokens PLS_SEMI
   |  plsql_block
   ;
   
statement_start
   :  sql_start
   |  identifier
   ;
   
opt_obj_type_and_name_and_bodies
   :  obj_type_and_name_and_body opt_obj_type_and_name_and_bodies
   |
   ;
   
as
   :  'AS'
   ;
   
is_or_as
   :  'IS'
   |  as
   ;
   
any_tokens
   :  any_tokens PLS_ANY
   |
   ;
   
opt_force
   :  opt_no force
   |  force
   |
   ;
   
opt_no
   :  no
   |
   ;   
   
no 
   :  'NO'
   ;
   
force
   :  'FORCE'
   ;

object_name
	:	identifier PLS_DOT identifier 
	|  identifier
	;
	
opt_identifier
   :  identifier
   |
   ;
   
identifier
   :	PLS_ID
   |	PLS_DOUBLEQUOTED_STRING
   ;
   
sql_start
   :  'INSERT'
   |  'UPDATE'
   |  'DELETE'
   |  'SELECT'
   |  'WITH'
   |  'MERGE'
   ;
